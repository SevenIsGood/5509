<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C55XX CSL 3.06.00 Examples: UHPI EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL 3.06.00 Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">UHPI EXAMPLE DOCUMENTATION </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="UHPI1"></a>
UHPI EXAMPLE1 - MEMORY ACCESS</h1>
<h2><a class="anchor" id="UHPI1x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the functionality of CSL UHPI module. The UHPI module on the C5517 DSP is used to communicate with MSP430, where the MSP430 is the master. This test works together with the CSL_UHPI_MSP430_Example.out</p>
<p>THe C5517 DSP is set up as the slave device in the UHPI transfer. It then waits for the data transfer.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSION C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="UHPI1y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Master board) </li>
<li>Open the project "CSL_UHPI_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Once this test is running, run CSL_UHPI_MSP430_Example.out on the MSP430 through a different Code Composer window. </li>
<li>Once the MSP430 part of the test is finished running, halt this program. </li>
<li>Verify the data on memory/DATA @ 0x8000. It should be: <pre class="fragment">    0x00008000  _stack, __edata, edata, __data, .data
    0x00008000  0x0000  0xFFFF  0x0001
    0x00008003  0xFFFE  0x0002  0xFFFD
    0x00008006  0x0003  0xFFFC  0x0004
    0x00008009  0xFFFB  0x0005  0xFFFA
    0x0000800C  0x0006  0xFFF9  0x0007
    0x0000800F  0xFFF8  0x0008  0xFFF7
    0x00008012  0x0009  0xFFF6  0x000A
    0x00008015  0xFFF5  0x000B  0xFFF4
    0x00008018  0x000C  0xFFF3  0x000D
    0x0000801B  0xFFF2  0x000E  0xFFF1
    0x0000801E  0x000F  0xFFF0  0x0010
    0x00008021  0xFFEF  0x0011  0xFFEE
    ...etc.
*  </pre> </li>
<li>Repeat the test at the following PLL frequencies C5517: 60MHz, 100MHz, 150MHz and 200MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="UHPI1z"></a>
TEST RESULT:</h2>
<ul>
<li>The data memory address data should match the values above.</li>
</ul>
<p>If on board buffers latched reset the board &amp; Run the program,Use the correct GEL file for CPU configuration</p>
<h1><a class="anchor" id="UHPI2"></a>
UHPI EXAMPLE2 - UHPI GPIO EXAMPLE</h1>
<h2><a class="anchor" id="UHPI2x"></a>
TEST DESCRIPTION:</h2>
<p>This test makes use of the GPIO functionality of the UHPI. The UHPI lines are enabled as GPIO using GPIO_ENL register, direction set as output or input depending upon if the test is being used for testing the output gpio functionality or the input using DIR1L and DIR2L and driven using DAT1L and DAT2L.</p>
<h2><a class="anchor" id="UHPI2y"></a>
TEST PROCEDURE and EXPECTED RESULT:</h2>
<p>NOTE: HPI_ON switch of SW4 should be in OFF position (HPI_ON signal should be high) HPI_SEL_IF switch should be in ON position (HPI_SEL_IF signal should be low)</p>
<p>Note: -------------&mdash; Testing GPIO OUTPUT Functionality ---------------------&mdash;</p>
<p>The Address/Data Lines direction between MSP430 to Phoenix is controlled by HR/W pin in u64 Run C5517 first</p>
<p>C5517: STEP 1: Open and Config UHPI peripheral controller STEP 2: Set all pins in UHPI controller to GPIO mode using UHPI GPIO_EN Register STEP 3: Set all pins to output and logic HIGH. STEP 4: Set pins one bye one from HIGH to LOW STEP 5: Close UHPI PORT</p>
<p>MSP430: STEP 1: Set up the clock and wait till CLOCK is stabilized. STEP 2: Set all pins to input. STEP 3: Check if Pin state is changed from HIGH to LOW in any of the pins.</p>
<p>Validating STEP 1: Load C5517 and put breakpoints on line 96,line 126. STEP 2: Uncomment C5517_UHPI_OUTPUT_TEST and comment C5517_UHPI_INPUT_TEST macro in MSP430 code, HPI_Host.c, C5517 code. STEP 3: Build and load MSP430 code and put breakpoint on line 113. STEP 4: Run code in C5517 till line 96, run code in MSP till line 113 and check if Status_Buffer values are 0xFF,0xFF,0x33 which indicates all lines are logic HIGH. STEP 5: Run code in C5517 till line 126, run code again in MSP till line 113 and check if Status_Buffer values are 0x00,0x00,0x00 which indicates all lines are logic LOW.</p>
<p>Note: -------------&mdash; Testing GPIO INPUT Functionality ---------------------&mdash;</p>
<p>The Address/Data Lines direction between MSP430 to Phoenix is controlled by HR/W pin in u64 Run C5517 first</p>
<p>C5517: STEP 1: Open and Config UHPI peripheral controller STEP 2: Set all pins in UHPI controller to GPIO mode using UHPI GPIO_EN Register STEP 3: Set all pins to inout. STEP 4: Read all pins status and display it. STEP 5: Close UHPI PORT</p>
<p>MSP430: STEP 1: Set up the clock and wait till CLOCK is stabilized. STEP 2: Set all pins to output. STEP 3: Set pins state to HIGH snd change from HIGH to LOW.</p>
<p>Validating: STEP 1: Load C5517 and run code STEP 2: Uncomment C5517_UHPI_INPUT_TEST and comment C5517_UHPI_OUTPUT_TEST macro in MSP430 code, HPI_Host.c and C5517 code. STEP 3: Build and load MSP430 code and put breakpoints on lines 85,89 and 94. STEP 4: Run code in MSP till line 118 and check value displayed in output console. STEP 5: Run code in MSP till line 122 and check value displayed in output console. STEP 6: Run code in MSP till line 127 and check value displayed in output console. STEP 7: The output pin state of MSP pins should reflect in displayed values.</p>
<h1><a class="anchor" id="UHPI3"></a>
UHPI EXAMPLE3 - UHPI MSP430 HOST LOOPBACK</h1>
<h2><a class="anchor" id="UHPI3x"></a>
TEST DESCRIPTION:</h2>
<p>This test configures C5517 UHPI as slave and MSP430 host as the master. The host sends data to the UHPI interface of C5517 and the same is collected and looped back to the host by the slave UHPI interface. Data integrity is confirmed by checking the SARAM locations being accessed by the host and the read buffer back at the host end.</p>
<h2><a class="anchor" id="UHPI3y"></a>
TEST PROCEDURE AND EXPECTED RESULT:</h2>
<p>: MSP_Communication</p>
<p>Run C5517 first</p>
<p>C5517: STEP 1: Open and Config UHPI peripheral controller STEP 2: Inititalize SARAM with data 0xAAAA 0x5555 from 0x8000 location of SARAM. STEP 3: Wait for DSP_INT(Host to DSP interrupt) to occur STEP 4: If interrupt is received, exit from loop STEP 5: Close UHPI PORT</p>
<p>MSP430: STEP 1: Set up the clock and wait till CLOCK is stabilized. STEP 2: Acess HPIA Register in write mode and Set some adrress value. STEP 3: Acess HPIA Register in Read mode. STEP 4: Check if Written and READ values are correct. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
