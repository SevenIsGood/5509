<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C55XX CSL 3.06.00 Examples: CSL SPI EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL 3.06.00 Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">CSL SPI EXAMPLE DOCUMENTATION </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="SPI1"></a>
SPI EXAMPLE1 - POLL MODE TEST</h1>
<h2><a class="anchor" id="SPI1x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the functionality of CSL SPI module. SPI module on the C5535/C5515/C5517 DSP is used to communicate with SPI EEPROM and audio code. This test code verifies the SPI functionality using SPI EEPROM.</p>
<p>During the test an EEPROM page will be written and read back using CSL SPI module. CSL SPI module will be configured using SPI_config() API. EEPROM status is checked to confirm that the device is not busy. Write pin is enabled on the EEPROM for SPI data write operation. Write command is sent to the SPI. Data is written to the EEPROM page using SPI_dataTransaction() API. After successful completion of the write operation read command is sent to the SPI. Data from the EEPROM page is read using SPI_dataTransaction() API. Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5535, C5515 AND C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h.</p>
<h2><a class="anchor" id="SPI1y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5535/C5515/C5517 EVM) </li>
<li>Open the project "CSL_SPI_Example_Out.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at the following PLL frequencies C5515: 60MHz and 100MHz C5517: 60MHz, 100MHz, 150MHz and 200MHz C5535 eZdsp: 60MHz and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="SPI1z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success </li>
<li>Data in the read and write buffers should match.</li>
</ul>
<h1><a class="anchor" id="SPI2"></a>
SPI EXAMPLE2 - SPI INTERNAL LOOPBACK MODE TEST</h1>
<h2><a class="anchor" id="SPI2x"></a>
TEST DESCRIPTION:</h2>
<ol type="1">
<li>Enable clocks to SPI and configure PPMODE in EBSR for SPI.</li>
<li>Configure the SPI interface: clk, wordlength, framelength, chip sel, data delay, clk and chip sel polarities.</li>
<li>Enable Loopback in SPIDCRU.</li>
<li>Fill in CPU Write data buffer with alternate 0x11's and 0xAB's and Read Data buffer with alternate 0x00's and 0xCD's.</li>
</ol>
<ol type="1">
<li>Write Data into SPIDRU and collect it from SPIDRL.</li>
<li>Compare the write and read data. There shouldn't be any data mismatch. Read Data Buffer should now have alternate 0x11's and 0xAB's. </li>
</ol>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
