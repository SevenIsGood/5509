<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C55XX CSL 3.06.00 Examples: McSPI EXAMPLE DOCUMENTATION</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL 3.06.00 Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">McSPI EXAMPLE DOCUMENTATION </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="McSPI1"></a>
McSPI EXAMPLE1 - McSPI DMA Chx 1 AND 2</h1>
<h2><a class="anchor" id="McSPI1x"></a>
TEST DESCRIPTION:</h2>
<p>This test uses DMA for facilitating data movement from CPU write buffer to CH0TX and CH0RX to CPU read buffer. The C5517 McSPI is configured as master and MSP430 host as the SPI slave. Data integrity is ensured by comparing the data being transmitted and data received back, albeit with some delay. DMA is configured for 1 32-bit word burst transaction. DMA0 Channel1 is used for Tx and DMA0 Channel2 is used for Rx.</p>
<pre class="fragment">This test code verifies the dma functionality of McSPI module. McSPI module
</pre><p> on the C5517 DSP is used to communicate with SPI MsP430 through DMA. This test code verifies the McSPI functionality using MsP430 SPI as slave module.</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI1y"></a>
TEST PROCEDURE:</h2>
<p>Load the C5517_SPI_MASTER code on C5517. Load the MSP430_SPI_SLAVE code in MSP430 .</p>
<p>Run the slave code &amp; then start the master code. Verify the data transaction by putting the break points in MSP430_SPI_SLAVE ISR</p>
<p>Master sent data's are available in MSP430 USCI_BO_SPI_MODE TX,RX buffer Put break points in C5517_SPI_MASTER end of the code gmcspiDmaReadBuf,gmcspiDmaWriteBuf data's are availble</p>
<p>SW4 Push button HPI_ON,HPI_SEL_IF is off.</p>
<p>Run the DMA test @ 100 Mhz PLL .</p>
<p>Other freq will read improper data</p>
<h2><a class="anchor" id="McSPI1z"></a>
TEST RESULT:</h2>
<p>All the CSL APIs should return success Run the slave program first &amp; then the master program Data in the read and write buffers should match.(or)Data needs to be verified in Slave program buffer</p>
<h1><a class="anchor" id="McSPI2"></a>
McSPI EXAMPLE2 - MASTER DMA MODE TEST</h1>
<h2><a class="anchor" id="McSPI2x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the dma functionality of McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430 through DMA. This test code verifies the McSPI functionality using MsP430 SPI as slave module. DMA data received in slave module</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI2y"></a>
TEST PROCEDURE:</h2>
<p>Load the C5517_SPI_MASTER code on C5517.</p>
<p>Load the MSP430_SPI_SLAVE code in MSP430 .</p>
<p>Run the slave code &amp; then start the master code.</p>
<p>Verify the data transaction by putting the break points in MSP430_SPI_SLAVE ISR</p>
<p>Master sent data's are available in MSP430 USCI_BO_SPI_MODE TX,RX buffer</p>
<p>Put break points in C5517_SPI_MASTER end of the code gmcspiDmaReadBuf, gmcspiDmaWriteBuf data's are availble</p>
<p>SW4 Push button HPI_ON,HPI_SEL_IF is off.</p>
<p>Run the DMA test @ 100 Mhz PLL .</p>
<p>Other freq will read improper data</p>
<h1><a class="anchor" id="McSPI3"></a>
McSPI EXAMPLE3 - MASTER FORCE IDLE MODE</h1>
<h2><a class="anchor" id="McSPI3x"></a>
TEST DESCRIPTION:</h2>
<p>This test uses DMA for facilitating data movement from CPU write buffer to CH0TX and CH0RX to CPU read buffer. The C5517 McSPI is configured as master and MSP430 host as the SPI slave. McSPI SIDLEMODE field in SYSCONFIGL is configured for FORCE IDLE mode.Data integrity is ensured by comparing the data being transmitted and data received back, albeit with some delay. DMA is configured for 1 32-bit word burst transaction. After DMA transaction is initiated, the McSPI clock is shut off for a while and then restarted. Data integrity is expected to be NOT affected.</p>
<p>This test code verifies the dma functionality of McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430 through DMA. This test code verifies the McSPI functionality using MsP430 SPI as slave module.</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>Brief description of test</p><ul>
<li>Configure McSPI as Master for Multiple data words transfer.</li>
<li>Enable DMA0 channel 1 for Write into and channel 0 for read from McSPI</li>
<li>Set the SIdleMode bit of MCSPI_SYSCONFIG to 2'b00 for force idle mode.</li>
<li>Initiate the Data transfer.</li>
<li>Issue the idle request to VBUS Bridge and check that the idle acknowledgment is issued by the bridge.</li>
<li>After idle acknowledgement from the bridge, issue the idle request to McSPI and check that the idle ack from the McSPI.</li>
<li>Gate the OCP and SPI reference clk by programming in the PCGCR system control registers.</li>
<li>After sometime, Disable the Clk Gating.</li>
<li>Remove the idle request to vbus bridge and the McSPI and check that the idle ack from the bridge and IP are de-asserted.</li>
<li>Now the McSPI master resume the data transfer.</li>
<li>Check the McSPI master transmitted data for data integrity.</li>
</ul>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. CHIP_C5517</p>
<h2><a class="anchor" id="McSPI3y"></a>
TEST PROCEDURE:</h2>
<p>Load the C5517_SPI_MASTER code on C5517. Load the MSP430_SPI_SLAVE code in MSP430 .</p>
<p>Run the slave code &amp; then start the master code. Verify the data transaction by putting the break points in MSP430_SPI_SLAVE ISR</p>
<p>Master sent data is available in MSP430 USCI_BO_SPI_MODE TX,RX buffer Put break points in C5517_SPI_MASTER end of the code gmcspiDmaReadBuf,gmcspiDmaWriteBuf data's are availble</p>
<p>SW4 Push button HPI_ON,HPI_SEL_IF is off. Run the DMA test @ 100 Mhz PLL . Other freq will read improper data</p>
<h2><a class="anchor" id="McSPI3z"></a>
TEST RESULT:</h2>
<p>All the CSL APIs should return success Run the slave program first &amp; then the master program Data in the read and write buffers should match.(or)Data needs to be verified in Slave program buffer</p>
<h1><a class="anchor" id="McSPI4"></a>
McSPI EXAMPLE4 - MASTER SMART IDLE MODE</h1>
<h2><a class="anchor" id="McSPI4x"></a>
TEST DESCRIPTION:</h2>
<p>This test uses DMA for facilitating data movement from CPU write buffer to CH0TX and CH0RX to CPU read buffer. The C5517 McSPI is configured as master and MSP430 host as the SPI slave. McSPI SIDLEMODE field in SYSCONFIGL is configured for SMART IDLE mode. Data integrity is ensured by comparing the data being transmitted and data received back, albeit with some delay. DMA is configured for 1 32-bit word burst transaction. After DMA transaction is initiated, the McSPI clock is shut off for a while and then restarted. Data integrity is expected to be NOT affected.</p>
<p>This test code verifies the dma functionality of McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430 through DMA. This test code verifies the McSPI functionality using MsP430 SPI as slave module.</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>Brief description of test</p><ul>
<li>Configure McSPI as Master for Multiple data words transfer.</li>
<li>Enable DMA0 channel 1 for Write into and channel 0 for read from McSPI</li>
<li>Set the SIdleMode bit of MCSPI_SYSCONFIG to 2'b10 for smart idle mode.</li>
<li>Initiate the Data transfer, and compare the master transmitted data after the data transfer is done. Disable the Channel.</li>
<li>Issue the idle request to VBUS Bridge and check that the idle acknowledgment is issued by the bridge.</li>
<li>After idle acknowledgement from the bridge, issue the idle request to McSPI and check that the idle ack from the McSPI.</li>
<li>Gate the OCP and SPI reference clk by programming in the PCGCR system control registers.</li>
<li>After sometime, Disable the Clk Gating.</li>
<li>Remove the idle request to vbus bridge and the McSPI and check that the idle ack from the bridge and IP are de-asserted.</li>
<li>Now Enable the channel and perform data transfer.</li>
<li>Check the McSPI master transmitted data for data integrity.</li>
</ul>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI4y"></a>
TEST PROCEDURE:</h2>
<p>Load the C5517_SPI_MASTER code on C5517. Load the MSP430_SPI_SLAVE code in MSP430 .</p>
<p>Run the slave code &amp; then start the master code. Verify the data transaction by putting the break points in MSP430_SPI_SLAVE ISR</p>
<p>Master sent data is available in MSP430 USCI_BO_SPI_MODE TX,RX buffer Put break points in C5517_SPI_MASTER end of the code gmcspiDmaReadBuf,gmcspiDmaWriteBuf data's are availble</p>
<p>SW4 Push button HPI_ON,HPI_SEL_IF is off. Run the DMA test @ 100 Mhz PLL . Other freq will read improper data</p>
<h2><a class="anchor" id="McSPI4z"></a>
TEST RESULT:</h2>
<p>All the CSL APIs should return success Run the slave program first &amp; then the master program Data in the read and write buffers should match.(or)Data needs to be verified in Slave program buffer</p>
<h1><a class="anchor" id="McSPI5"></a>
McSPI EXAMPLE5 - MASTER different McSPI clk configurations</h1>
<h2><a class="anchor" id="McSPI5x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430. This test code verifies the McSPI functionality with MsP430 SPI.</p>
<p>CSL McSPI module will be configured using McSPI_config() API. Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>Every 16 transactions, gate the McSPI clk and change FCDIV and OCDIV fields in MSPIFCDR register and resume the McSPI transfer.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI5y"></a>
TEST PROCEDURE:</h2>
<p>Load the slave program in msp430 Load the program in C5517</p>
<p>Run the slave program first &amp; C5517 master program. Master program will print the Tx,Rx data .</p>
<p>observation:</p>
<p>Data should loopback &amp; printed as below</p>
<p>McSPI Tx data : 0 McSPI Rx data : ff</p>
<p>McSPI Tx data : 1 McSPI Rx data : fe</p>
<p>McSPI Tx data : 2 McSPI Rx data : 0</p>
<p>McSPI Tx data : 3 McSPI Rx data : 1 McSPI Tx data : 4 McSPI Rx data : 2</p>
<p>McSPI Tx data : 5 McSPI Rx data : 3</p>
<p>McSPI Tx data : 6 McSPI Rx data : 4</p>
<p>... ... ...</p>
<p>McSPI Tx data : d McSPI Rx data : b</p>
<p>McSPI Tx data : e McSPI Rx data : c</p>
<p>McSPI Tx data : f McSPI Rx data : d count = 16 MSPIFCDR_OCDIV = 0x1 MSPIFCDR_FCDIV = 0x1 count = 32</p>
<p>McSPI Tx data : 10 McSPI Rx data : e</p>
<p>McSPI Tx data : 11 McSPI Rx data : f</p>
<p>McSPI Tx data : 12 McSPI Rx data : 10</p>
<p>McSPI Tx data : 13 McSPI Rx data : 11</p>
<p>McSPI Tx data : 14 McSPI Rx data : 12</p>
<p>McSPI Tx data : 15 McSPI Rx data : 13</p>
<p>... ... ...</p>
<p>McSPI Tx data : 1e McSPI Rx data : 1c</p>
<p>McSPI Tx data : 1f McSPI Rx data : 1d count = 48 MSPIFCDR_OCDIV = 0x1 MSPIFCDR_FCDIV = 0x2 count = 64</p>
<p>McSPI Tx data : 20 McSPI Rx data : 1e</p>
<p>McSPI Tx data : 21 McSPI Rx data : 1f</p>
<p>McSPI Tx data : 22 McSPI Rx data : 20</p>
<p>McSPI Tx data : 23 McSPI Rx data : 21</p>
<h1><a class="anchor" id="McSPI6"></a>
McSPI EXAMPLE6 - MASTER FULL DUPLEX TEST</h1>
<h2><a class="anchor" id="McSPI6x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI module. The McSPI module on the C5517 DSP is used to communicate with SPI MsP430. This test code verifies the McSPI functionality with MsP430 SPI .</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI6y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Master board) </li>
<li>Open the project "CSL_McSPI_MasterFullDulpex_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Load the equivalent CSL_McSPIMaster_MSP430Slave_FullDuplex onto the MSP430 </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the transmitting data </li>
<li>Run the MSP430 program and observe the receiving data increase in value </li>
<li>Repeat the test at the following PLL frequencies C5517: 60MHz, 100MHz, 150MHz and 200MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="McSPI1z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success </li>
<li>Run the master program first &amp; then the slave program </li>
<li>Data in the read and write buffers should match.(or)Data needs to be verified in Slave program buffer</li>
</ul>
<p>If on board buffers latched reset the board &amp; Run the program,Use the correct GEL file for CPU configuration</p>
<h1><a class="anchor" id="McSPI7"></a>
McSPI EXAMPLE7 - MASTER FULL DUPLEX TEST</h1>
<h2><a class="anchor" id="McSPI7x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430. This test code verifies the McSPI functionality with MsP430 SPI .</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI7y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Master board) </li>
<li>Open the project "CSL_McSPI_MasterFullDulpex_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode25</li>
</ul>
<ul>
<li>Load the slave program in msp430 </li>
<li>Load the program in C5517 </li>
<li>Run the slave program first &amp; C5517 master program. </li>
<li>Master program will print the Tx,Rx data .</li>
</ul>
<p>Observation:</p>
<p>Data should loopback &amp; printed as below</p>
<p>McSPI RxL data : 122</p>
<p>McSPI RxL data : 123</p>
<p>McSPI RxL data : 124</p>
<p>McSPI RxL data : 125</p>
<p>McSPI RxL data : 126</p>
<h1><a class="anchor" id="McSPI8"></a>
McSPI EXAMPLE8 - MASTER FULL DUPLEX TEST</h1>
<h2><a class="anchor" id="McSPI8x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI module. McSPI module on the C5517 DSP is used to communicate with SPI MsP430. This test code verifies the McSPI functionality with MsP430 SPI .</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI8y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Master board) </li>
<li>Open the project "CSL_McSPI_MasterFullDulpex_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<p>Manual test, load/run MSP430_SPI_SlaveFullDuplex_Interrupt_Example on MSP430 and CSL_McSPI_MasterFullDuplex_Interrupt_Example on C5517 Load the slave program in msp430</p>
<p>Load the program in c5517</p>
<p>Run the slave program first &amp; c5525 master program.</p>
<p>Master program will print the Tx,Rx data .</p>
<p>Make sure the resisters are in position in master mode</p>
<p>R277 ,r275,r265 populate</p>
<p>R269 , r266 ,r274 removed</p>
<p>Observation:</p>
<p>Data should loopback &amp; printed as below</p>
<p>McSPI RxL data : 122</p>
<p>McSPI RxL data : 123</p>
<p>McSPI RxL data : 124</p>
<p>McSPI RxL data : 125</p>
<p>McSPI RxL data : 126</p>
<p>McSPI RxL data : 127</p>
<p>McSPI RxL data : 128</p>
<p>McSPI RxL data : 129</p>
<p>McSPI RxL data : 130</p>
<h1><a class="anchor" id="McSPI9"></a>
McSPI EXAMPLE9 - SLAVE FULL DUPLEX MODE TEST</h1>
<h2><a class="anchor" id="McSPI9x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI as slave module. McSPI module on the C5517 DSP is used to communicate with SPI MSP430. This test code verifies the McSPI functionality using SPI EEPROM.</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI9y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Slave board) </li>
<li>Make sure the slave board is connected </li>
<li>Open the project "CSL_McSPI_SlaveFullDulpex_Example.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at PLL frequencies 40, 60, 75 and 100MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<p>Manual test, load/run CSL_McSPI_SlaveFullDuplex_Interrupt_Example on C5517 and MSP430_SPI_MasterFullDuplex_Interrupt_Example on MSP430</p>
<p>Change the MSP430_SPI_DIR switch in SW11 to OFF position.</p>
<p>Load the C5517_SPI_SLAVE code on C5517.</p>
<p>Load the MSP430_SPI_MASTER code in MsP430</p>
<p>Verify the data transaction by putting the break points in MSP430 program.</p>
<p>the data's are available in MSP430 USCI_BO_SPI_MODE TX,RX buffer</p>
<p>C5517_SPI_SLAVE program will print the full duplex data</p>
<p>NOTE:</p><ol type="1">
<li>Start the C5517 slave mcspi side first, then MSP430 master side.</li>
<li>SW11 switch 6 away from ON towards dot, which you have confirmed to have already checked.</li>
<li>Wait for 30s or so, there will be a continuous print of "The Halfway mark reached" debug printf's.</li>
<li>Then again wait for 30s, after which the C5517 end program will print out the data received. Will update the same on the Readme.</li>
</ol>
<p>Output: McSPI Mode test case mcspi_open() Success McSPI Mode 0 Test start Halfway mark reached Halfway mark reached Halfway mark reached Halfway mark reached Halfway mark reached ... ... ..Halfway mark reached Halfway mark reached ! xfr complete ! Rcvd Data[0]:0x0001 Rcvd Data[1]:0x0002 Rcvd Data[2]:0x0003 Rcvd Data[3]:0x0004 Rcvd Data[4]:0x0005 Rcvd Data[5]:0x0006 Rcvd Data[6]:0x0007 Rcvd Data[7]:0x0008 ... ... ..Rcvd Data[43]:0x002c Rcvd Data[44]:0x002d Rcvd Data[45]:0x002e Rcvd Data[46]:0x002f Rcvd Data[47]:0x0030 Rcvd Data[48]:0x0031 Rcvd Data[49]:0x0032 Rcvd Data[50]:0x0033 Rcvd Data[51]:0x0034 Rcvd Data[52]:0x0035 Rcvd Data[53]:0x0036 Rcvd Data[54]:0x0037 Rcvd Data[55]:0x0038 Rcvd Data[56]:0x0039 Rcvd Data[57]:0x003a Rcvd Data[58]:0x003b Rcvd Data[59]:0x003c Rcvd Data[60]:0x003d Rcvd Data[61]:0x003e Rcvd Data[62]:0x003f Rcvd Data[63]:0x0040</p>
<h1><a class="anchor" id="McSPI10"></a>
McSPI EXAMPLE10 - MASTER FULL DUPLEX FLASH TEST</h1>
<h2><a class="anchor" id="McSPI10x"></a>
TEST DESCRIPTION:</h2>
<p>This test code verifies the full duplex functionality of CSL McSPI module on the C5517 DSP is used to communicate with flash.</p>
<p>CSL McSPI module will be configured using McSPI_config() API.Write,Read function used for data transfer operation. After successful completion of the write operation read sent to the SPI.Write and read buffers are compared for the data verification. A small amount of delay is required after each data operation to allow the device get ready for next data operation.</p>
<p>NOTE: THIS TEST HAS BEEN DEVELOPED TO WORK WITH CHIP VERSIONS C5517. MAKE SURE THAT PROPER CHIP VERSION MACRO IS DEFINED IN THE FILE c55xx_csl\inc\csl_general.h. "#define CHIP_C5517"</p>
<h2><a class="anchor" id="McSPI10y"></a>
TEST PROCEDURE:</h2>
<ul>
<li>Open the CCS and connect the target (C5517 EVM-Master board) </li>
<li>Open the project "CSL_McSPI_MasterFullDulpexTest_Flash.pjt" and build it </li>
<li>Load the program on to the target </li>
<li>Set the PLL frequency to 12.288MHz </li>
<li>Run the program and observe the test result </li>
<li>Repeat the test at the following PLL frequencies C5517: 60MHz, 100MHz, 150MHz and 200MHz </li>
<li>Repeat the test in Release mode</li>
</ul>
<h2><a class="anchor" id="McSPI10z"></a>
TEST RESULT:</h2>
<ul>
<li>All the CSL APIs should return success Run the slave program first &amp; then the master program </li>
<li>Data in the read and write buffers should match.(or)Data needs to be verified in Slave program buffer</li>
</ul>
<p>If on board buffers latched reset the board &amp; Run the program,Use the correct GEL file for CPU configuration </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
