<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C55XX CSL 3.06.00 Examples: C:/c55_lp/git/c55_csl/c55xx_csl/ccs_v6.x_examples/gpt/CSL_GPTExample/csl_gpt_example.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL 3.06.00 Examples
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_9bec7083027963d9f9ceae2cc7474de5.html">git</a></li><li class="navelem"><a class="el" href="dir_b939d78dbffbfe7544f76cce0512290d.html">c55_csl</a></li><li class="navelem"><a class="el" href="dir_0b9cbc4d9ead0ca0e71abd729070d16d.html">c55xx_csl</a></li><li class="navelem"><a class="el" href="dir_e9ea15cd39a126421ac4b41739582c90.html">ccs_v6.x_examples</a></li><li class="navelem"><a class="el" href="dir_dab4c667acc6ef1172dea380cc0e767e.html">gpt</a></li><li class="navelem"><a class="el" href="dir_7942ea2f77529acecce83705683848d8.html">CSL_GPTExample</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">csl_gpt_example.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Example test code to verify the CSL GPT module functionality.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &quot;csl_gpt.h&quot;</code><br />
<code>#include &quot;csl_intc.h&quot;</code><br />
<code>#include &lt;csl_general.h&gt;</code><br />
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:adcede2b22839e0086b46bc6c72f52157"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="adcede2b22839e0086b46bc6c72f52157"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_TEST_FAILED</b>&#160;&#160;&#160;(1u)</td></tr>
<tr class="separator:adcede2b22839e0086b46bc6c72f52157"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7114c7d847c34dacd35ec963424cf6ea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7114c7d847c34dacd35ec963424cf6ea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_TEST_PASSED</b>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a7114c7d847c34dacd35ec963424cf6ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74b6103da5e456319edbef17f1a3979b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a74b6103da5e456319edbef17f1a3979b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_000</b>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a74b6103da5e456319edbef17f1a3979b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae439ded1c751e2843542458c18e4449d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae439ded1c751e2843542458c18e4449d"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_001</b>&#160;&#160;&#160;(1u)</td></tr>
<tr class="separator:ae439ded1c751e2843542458c18e4449d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a027a02e0310d11bc2533867997d374b6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a027a02e0310d11bc2533867997d374b6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_002</b>&#160;&#160;&#160;(2u)</td></tr>
<tr class="separator:a027a02e0310d11bc2533867997d374b6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a58aff4754aec7d4f51dc7f6601a9145c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a58aff4754aec7d4f51dc7f6601a9145c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_003</b>&#160;&#160;&#160;(3u)</td></tr>
<tr class="separator:a58aff4754aec7d4f51dc7f6601a9145c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad9cc246319d4c74b5480b7f41016a0f6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ad9cc246319d4c74b5480b7f41016a0f6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_004</b>&#160;&#160;&#160;(4u)</td></tr>
<tr class="separator:ad9cc246319d4c74b5480b7f41016a0f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a828aeaf6ea394c437a8eb71e4fd7e9ab"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a828aeaf6ea394c437a8eb71e4fd7e9ab"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_005</b>&#160;&#160;&#160;(5u)</td></tr>
<tr class="separator:a828aeaf6ea394c437a8eb71e4fd7e9ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeeef00b6ce4c0ec3471283abc01a9bd3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aeeef00b6ce4c0ec3471283abc01a9bd3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_006</b>&#160;&#160;&#160;(6u)</td></tr>
<tr class="separator:aeeef00b6ce4c0ec3471283abc01a9bd3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09f87c30e2d7ea4a40b6de8d549e8b34"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a09f87c30e2d7ea4a40b6de8d549e8b34"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_DIV_007</b>&#160;&#160;&#160;(7u)</td></tr>
<tr class="separator:a09f87c30e2d7ea4a40b6de8d549e8b34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57d9aedf206ef5152de3dc701e385837"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a57d9aedf206ef5152de3dc701e385837"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>CSL_PLL_CLOCKIN</b>&#160;&#160;&#160;(32768u)</td></tr>
<tr class="separator:a57d9aedf206ef5152de3dc701e385837"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ce23243e9baa954f1d2b8852d2eacae"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4ce23243e9baa954f1d2b8852d2eacae"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PLL_CNTL1</b>&#160;&#160;&#160;*(ioport volatile unsigned *)0x1C20</td></tr>
<tr class="separator:a4ce23243e9baa954f1d2b8852d2eacae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af02c0ca416e057984b3f132075a59d44"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="af02c0ca416e057984b3f132075a59d44"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PLL_CNTL2</b>&#160;&#160;&#160;*(ioport volatile unsigned *)0x1C21</td></tr>
<tr class="separator:af02c0ca416e057984b3f132075a59d44"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac3ae4bb1a9dab23a992d89d66ffbba3c"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac3ae4bb1a9dab23a992d89d66ffbba3c"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PLL_CNTL3</b>&#160;&#160;&#160;*(ioport volatile unsigned *)0x1C22</td></tr>
<tr class="separator:ac3ae4bb1a9dab23a992d89d66ffbba3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac8be318cccfe09cec4623cfba6896041"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac8be318cccfe09cec4623cfba6896041"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PLL_CNTL4</b>&#160;&#160;&#160;*(ioport volatile unsigned *)0x1C23</td></tr>
<tr class="separator:ac8be318cccfe09cec4623cfba6896041"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a4f9daa63bbed24afba634f7385242540"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a4f9daa63bbed24afba634f7385242540"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>VECSTART</b> (void)</td></tr>
<tr class="separator:a4f9daa63bbed24afba634f7385242540"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa5e7edbbe02b20ca7c75241c5dba218"><td class="memItemLeft" align="right" valign="top">Int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csl__gpt__example_8c.html#aaa5e7edbbe02b20ca7c75241c5dba218">CSL_gptCountReadTest</a> (void)</td></tr>
<tr class="memdesc:aaa5e7edbbe02b20ca7c75241c5dba218"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPT Count Read Test function.  <a href="#aaa5e7edbbe02b20ca7c75241c5dba218">More...</a><br /></td></tr>
<tr class="separator:aaa5e7edbbe02b20ca7c75241c5dba218"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a7b39fec2d8f6671432018ae657cb8"><td class="memItemLeft" align="right" valign="top">Int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csl__gpt__example_8c.html#a42a7b39fec2d8f6671432018ae657cb8">CSL_gptIntrTest</a> (void)</td></tr>
<tr class="memdesc:a42a7b39fec2d8f6671432018ae657cb8"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPT Count Rate Verification test function.  <a href="#a42a7b39fec2d8f6671432018ae657cb8">More...</a><br /></td></tr>
<tr class="separator:a42a7b39fec2d8f6671432018ae657cb8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a506dd9c224ddce2a4f018dfdd9969015"><td class="memItemLeft" align="right" valign="top">Uint32&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csl__gpt__example_8c.html#a506dd9c224ddce2a4f018dfdd9969015">getSysClk</a> (void)</td></tr>
<tr class="memdesc:a506dd9c224ddce2a4f018dfdd9969015"><td class="mdescLeft">&#160;</td><td class="mdescRight">Function to calculate the system clock.  <a href="#a506dd9c224ddce2a4f018dfdd9969015">More...</a><br /></td></tr>
<tr class="separator:a506dd9c224ddce2a4f018dfdd9969015"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a576834b5c742f5c646556696da069091"><td class="memItemLeft" align="right" valign="top">interrupt void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csl__gpt__example_8c.html#a576834b5c742f5c646556696da069091">gpt0Isr</a> (void)</td></tr>
<tr class="memdesc:a576834b5c742f5c646556696da069091"><td class="mdescLeft">&#160;</td><td class="mdescRight">GPT Interrupt Service Routine.  <a href="#a576834b5c742f5c646556696da069091">More...</a><br /></td></tr>
<tr class="separator:a576834b5c742f5c646556696da069091"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6288eba0f8e8ad3ab1544ad731eb7667"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>main</b> (void)</td></tr>
<tr class="separator:a6288eba0f8e8ad3ab1544ad731eb7667"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a32aadc18e39a38bf7f1efd0f7c8835ed"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a32aadc18e39a38bf7f1efd0f7c8835ed"></a>
Uint32&#160;</td><td class="memItemRight" valign="bottom"><b>cpuCycleCount</b> = 0</td></tr>
<tr class="separator:a32aadc18e39a38bf7f1efd0f7c8835ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a55700e6e8f9f6eee7f30c713e77cbc4f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a55700e6e8f9f6eee7f30c713e77cbc4f"></a>
Uint32&#160;</td><td class="memItemRight" valign="bottom"><b>sysClk</b></td></tr>
<tr class="separator:a55700e6e8f9f6eee7f30c713e77cbc4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab29696652e7e84542e510bcb7f23ccf2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ab29696652e7e84542e510bcb7f23ccf2"></a>
volatile Uint16&#160;</td><td class="memItemRight" valign="bottom"><b>hitIsr</b> = 0</td></tr>
<tr class="separator:ab29696652e7e84542e510bcb7f23ccf2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef546e346fdce3fe84718755a98d61b8"><td class="memItemLeft" align="right" valign="top">volatile Int16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="csl__gpt__example_8c.html#aef546e346fdce3fe84718755a98d61b8">PaSs_StAtE</a> = 0x0001</td></tr>
<tr class="memdesc:aef546e346fdce3fe84718755a98d61b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">main function  <a href="#aef546e346fdce3fe84718755a98d61b8">More...</a><br /></td></tr>
<tr class="separator:aef546e346fdce3fe84718755a98d61b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1e18b86b1fb1d43808ea4bd8b75a10e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ac1e18b86b1fb1d43808ea4bd8b75a10e"></a>
volatile Int16&#160;</td><td class="memItemRight" valign="bottom"><b>PaSs</b> = 0x0000</td></tr>
<tr class="separator:ac1e18b86b1fb1d43808ea4bd8b75a10e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Example test code to verify the CSL GPT module functionality. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="aaa5e7edbbe02b20ca7c75241c5dba218"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int16 CSL_gptCountReadTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPT Count Read Test function. </p>
<p>This is function verifies reading the counter values from the GPT</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CSL_TEST_PASSED - Success CSL_TEST_FAILED - Failure </dd></dl>

</div>
</div>
<a class="anchor" id="a42a7b39fec2d8f6671432018ae657cb8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Int16 CSL_gptIntrTest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPT Count Rate Verification test function. </p>
<p>This function verifies whether timer is running at the configured rate or not. This function configures and enables the GPT interrupts to indicate the expiry of the timer count. Test counts number of cycles executed by the CPU after starting the timer till the expiry of the timer. These cycles are used to verify the WDT count rate. It is assumed that calculated CPU cycles will be with in the range ±1% actual CPU clock cycles. Test will be successful if the calculated CPU cycles fall with in this range.</p>
<p>NOTE: Changing the PLL setting in the middle (After <a class="el" href="csl__gpt__example_8c.html#a506dd9c224ddce2a4f018dfdd9969015" title="Function to calculate the system clock. ">getSysClk()</a> call) of the test will result in test failure.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CSL_TEST_PASSED - Success CSL_TEST_FAILED - Failure </dd></dl>

</div>
</div>
<a class="anchor" id="a506dd9c224ddce2a4f018dfdd9969015"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint32 getSysClk </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Function to calculate the system clock. </p>
<p>Function to calculate the clock at which system is running.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>System clock value in KHz </dd></dl>

</div>
</div>
<a class="anchor" id="a576834b5c742f5c646556696da069091"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">interrupt void gpt0Isr </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>GPT Interrupt Service Routine. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="aef546e346fdce3fe84718755a98d61b8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile Int16 PaSs_StAtE = 0x0001</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>main function </p>
<p>This function calls the GPT test function and displays the test result.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">none</td><td></td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>none </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
