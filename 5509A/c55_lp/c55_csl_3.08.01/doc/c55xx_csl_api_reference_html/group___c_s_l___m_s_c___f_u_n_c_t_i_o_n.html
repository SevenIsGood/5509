<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>C55XX CSL 3.06.00 API: USB MSC Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">C55XX CSL 3.06.00 API
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">USB MSC Functions<div class="ingroups"><a class="el" href="group___c_s_l___m_s_c___a_p_i.html">MSC</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga26d841d9acac8c72cc7f9de68b28753f"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga26d841d9acac8c72cc7f9de68b28753f">MSC_Open</a> (<a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a> pAppClassHandle, <a class="el" href="struct_c_s_l___usb_config.html">CSL_UsbConfig</a> *usbConfig)</td></tr>
<tr class="separator:ga26d841d9acac8c72cc7f9de68b28753f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45d9d1d2cc2b5de652e1cda7e2cd5811"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga45d9d1d2cc2b5de652e1cda7e2cd5811">MSC_OpenFullspeed</a> (<a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a> pAppClassHandle, <a class="el" href="struct_c_s_l___usb_config.html">CSL_UsbConfig</a> *usbConfig)</td></tr>
<tr class="separator:ga45d9d1d2cc2b5de652e1cda7e2cd5811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0ff3428f21435535b0f5e2a702cc7098"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga0ff3428f21435535b0f5e2a702cc7098">MSC_Close</a> (<a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a> pAppClassHandle)</td></tr>
<tr class="separator:ga0ff3428f21435535b0f5e2a702cc7098"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga6486f02d96e2dfec1808e191ba3b1b2d"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga6486f02d96e2dfec1808e191ba3b1b2d">MSC_SetLunAttr</a> (<a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a> pAppClassHandle, <a class="el" href="struct_c_s_l___msc_lun_attrib_app.html">CSL_MscLunAttribApp</a> *lunHandle, Uint16 lunNum)</td></tr>
<tr class="separator:ga6486f02d96e2dfec1808e191ba3b1b2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga459f0629c19b630ec9e5dccd30707da0"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga459f0629c19b630ec9e5dccd30707da0">MSC_Ctrl</a> (void *pMSC)</td></tr>
<tr class="separator:ga459f0629c19b630ec9e5dccd30707da0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa15093092625dbf5cfa3d703a07733ab"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gaa15093092625dbf5cfa3d703a07733ab">MSC_Bulk</a> (void *pMSC)</td></tr>
<tr class="separator:gaa15093092625dbf5cfa3d703a07733ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga918d7639123cda0827b49fb5d5132f10"><td class="memItemLeft" align="right" valign="top">Uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga918d7639123cda0827b49fb5d5132f10">MSC_GetLunLockedStatus</a> (void *pMSC, Uint16 lunNum)</td></tr>
<tr class="separator:ga918d7639123cda0827b49fb5d5132f10"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8c501ce06f9f102b036b22140c3ab8f"><td class="memItemLeft" align="right" valign="top">Uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gaf8c501ce06f9f102b036b22140c3ab8f">MSC_GetactivityFlagStatus</a> (void *pMSC)</td></tr>
<tr class="separator:gaf8c501ce06f9f102b036b22140c3ab8f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac9ffb7fe0e61d7cb48fb671a8466aebb"><td class="memItemLeft" align="right" valign="top">Uint16&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gac9ffb7fe0e61d7cb48fb671a8466aebb">MSC_GetsuspendFlagStatus</a> (void *pMSC)</td></tr>
<tr class="separator:gac9ffb7fe0e61d7cb48fb671a8466aebb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga20cc4ac09dcf1b6d39f920d40f401cfc"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga20cc4ac09dcf1b6d39f920d40f401cfc">MSC_HandleStateWaitForCBW</a> (<a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a> hUsbDev, <a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbOutEp, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbInEp)</td></tr>
<tr class="separator:ga20cc4ac09dcf1b6d39f920d40f401cfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf60c95cbc0a950d1cd7bd64da25c5393"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gaf60c95cbc0a950d1cd7bd64da25c5393">MSC_ExecuteRead</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, Uint16 lunNum, Uint16 first)</td></tr>
<tr class="separator:gaf60c95cbc0a950d1cd7bd64da25c5393"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga45c0497ae52ac8f7b0e463584f4b4fd1"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga45c0497ae52ac8f7b0e463584f4b4fd1">MSC_ExecuteWrite</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, Uint16 lunNum, Uint16 first)</td></tr>
<tr class="separator:ga45c0497ae52ac8f7b0e463584f4b4fd1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga35c39ffa579aa89700905691c90f323f"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga35c39ffa579aa89700905691c90f323f">MSC_HandleTestUnitReady</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbInEp, Uint16 logicalUnit)</td></tr>
<tr class="separator:ga35c39ffa579aa89700905691c90f323f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga579e1756a15d48ce60e7720c0f38d480"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga579e1756a15d48ce60e7720c0f38d480">MSC_HandlePreventAllowMediaRemoval</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbInEp, Uint16 logicalUnit)</td></tr>
<tr class="separator:ga579e1756a15d48ce60e7720c0f38d480"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54485498e9c0f9bfbabea7c8ac1f3d04"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga54485498e9c0f9bfbabea7c8ac1f3d04">MSC_HandleReadCapacity</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbInEp, Uint16 logicalUnit)</td></tr>
<tr class="separator:ga54485498e9c0f9bfbabea7c8ac1f3d04"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga28498362ef8ed4a824cf1eb3557f5018"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___c_s_l___m_s_c___e_n_u_m.html#ga9324e3a9461945d734f76af9753281c1">CSL_MscRequestRet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga28498362ef8ed4a824cf1eb3557f5018">MSC_reqGetDescriptor</a> (<a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a> devHandle, <a class="el" href="struct_c_s_l___usb_setup_struct.html">CSL_UsbSetupStruct</a> *usbSetup, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hInEp, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hOutEp, void *pMsc)</td></tr>
<tr class="separator:ga28498362ef8ed4a824cf1eb3557f5018"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga742c31a8247cad9f1f0746cda3c36e90"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group___c_s_l___m_s_c___e_n_u_m.html#ga9324e3a9461945d734f76af9753281c1">CSL_MscRequestRet</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#ga742c31a8247cad9f1f0746cda3c36e90">MSC_reqBotMscReset</a> (<a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a> devHandle, <a class="el" href="struct_c_s_l___usb_setup_struct.html">CSL_UsbSetupStruct</a> *usbSetup, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hInEp, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hOutEp, void *pMsc)</td></tr>
<tr class="separator:ga742c31a8247cad9f1f0746cda3c36e90"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab9f81a38696a3764b5fa17cc7885cef0"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gab9f81a38696a3764b5fa17cc7885cef0">MSC_sendCswWithPhaseError</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, <a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a> hUsbInEp)</td></tr>
<tr class="separator:gab9f81a38696a3764b5fa17cc7885cef0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabd34a0a4aeb1dc85c741520f91dfa11a"><td class="memItemLeft" align="right" valign="top">CSL_Status&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___c_s_l___m_s_c___f_u_n_c_t_i_o_n.html#gabd34a0a4aeb1dc85c741520f91dfa11a">MSC_handleDataDirMisMatch</a> (<a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *pMscHandle, Uint16 dataDir)</td></tr>
<tr class="separator:gabd34a0a4aeb1dc85c741520f91dfa11a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="gaa15093092625dbf5cfa3d703a07733ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_Bulk </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMSC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_Bulk</b> </p>
<p><b>Description</b> <br />
 This function handles all UBS traffic on the Bulk Endpoint This maintains the state of the MSC application. Provides Media Access Data to the low level USB module for transfer.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMSC        Handle to the MSC Class Obj</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc class handle </li>
<li>CSL_ESYS_INVPARAMS - Returned for invalid storage state</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Transfers data on bulk end points</p>
<p><b>Modifies</b> <br />
 USB data buffeters</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        status = MSC_Bulk(pAppClassHandle-&gt;pMscObj);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga0ff3428f21435535b0f5e2a702cc7098"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_Close </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a>&#160;</td>
          <td class="paramname"><em>pAppClassHandle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_Close</b> </p>
<p><b>Description</b> <br />
 This function Opens the Msc module.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pAppClassHandle       Application handle to the MSC Class Obj</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc class handle</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Closes the Msc module</p>
<p><b>Modifies</b> <br />
 Msc and Ctl handles</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        status = MSC_Close(pAppClassHandle);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga459f0629c19b630ec9e5dccd30707da0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_Ctrl </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMSC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_Ctrl</b> </p>
<p><b>Description</b> <br />
 This function handles all USB traffic on the Control Endpoint. Detects the events on the Control Endpoint and takes the appropriate action</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMSC        Handle to the MSC Class Obj</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc class handle </li>
<li>CSL_MSC_INVALID_REQUEST_HANDLER - Invalid request class handler</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Control end point events are serviced</p>
<p><b>Modifies</b> <br />
 USB Registers.</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        status = MSC_Ctrl(pAppClassHandle-&gt;pMscObj);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="gaf60c95cbc0a950d1cd7bd64da25c5393"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_ExecuteRead </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>lunNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>first</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_ExecuteRead</b> </p>
<p><b>Description</b> <br />
 This function executes the read operation. Data read from the storage media is sent to the host</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc object
        lunNum          - Logical unit number
        first           - Flag to indicate first write operation</pre><p><b> Return Value </b> <br />
 Status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Writes the data to the media</p>
<p><b>Modifies</b> <br />
 Data buffers</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscRequestRet       (*fpRequestHandler)(CSL_MSC_REQUEST_ARGS)
         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_MscCtrlObject       *pCtrlHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         Uint16                  request;
         pMscAppClassHandle      pAppClassHandle;

         pAppClassHandle = &amp;mscAppHandle;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(pAppClassHandle);
         ....
         ....
         status = MSC_ExecuteRead(pMscHandle, lunNum, FALSE);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga45c0497ae52ac8f7b0e463584f4b4fd1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_ExecuteWrite </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>lunNum</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>first</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_ExecuteWrite</b> </p>
<p><b>Description</b> <br />
 This function executes the write operation. Data sent by the host is is written to the storage media.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc object
        lunNum          - Logical unit number
        first           - Flag to indicate first write operation</pre><p><b> Return Value </b> <br />
 Status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Writes the data to the media</p>
<p><b>Modifies</b> <br />
 Data buffers</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscRequestRet       (*fpRequestHandler)(CSL_MSC_REQUEST_ARGS)
         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_MscCtrlObject       *pCtrlHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         Uint16                  request;
         pMscAppClassHandle      pAppClassHandle;

         pAppClassHandle = &amp;mscAppHandle;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(pAppClassHandle);
         ....
         ....
         status = MSC_ExecuteWrite(pMscHandle, lunNum, FALSE);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="gaf8c501ce06f9f102b036b22140c3ab8f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint16 MSC_GetactivityFlagStatus </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMSC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_GetactivityFlagStatus</b> </p>
<p><b>Description</b> <br />
 This function gives the status of the activity Flag</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMSC        Handle to the MSC Class Obj</pre><p><b> Return Value </b> - Status of the activity flag </p><ul>
<li>'1' - If the activity is present </li>
<li>'0' - If the activity is not present</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Returns Activity flag status</p>
<p><b>Modifies</b> <br />
 None</p>
<p><b>Example</b> </p><pre class="fragment">        Uint16                  activityFlagStat;
        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        activityFlagStat = MSC_GetactivityFlagStatus(pAppClassHandle-&gt;pMscObj);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga918d7639123cda0827b49fb5d5132f10"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint16 MSC_GetLunLockedStatus </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMSC</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>lunNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_GetLunLockedStatus</b> </p>
<p><b>Description</b> <br />
 This function gets the Locked/Unlocked Status of the Lun.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMSC        Handle to the MSC Class Obj
        lunNum      Logical Unit Number</pre><p><b> Return Value </b> - Lock/Unlock status of the Lun </p><ul>
<li>'1' - if the lun is locked </li>
<li>'0' - if the lun is unlocked</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Returns the Locked/Unlocked status of Lun.</p>
<p><b>Modifies</b> <br />
 None</p>
<p><b>Example</b> </p><pre class="fragment">        Uint16                  lockStatus;
        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        lockStatus = MSC_GetLunLockedStatus(pAppClassHandle-&gt;pMscObj, 0);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="gac9ffb7fe0e61d7cb48fb671a8466aebb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Uint16 MSC_GetsuspendFlagStatus </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMSC</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_GetsuspendFlagStatus</b> </p>
<p><b>Description</b> <br />
 This function gives the status of the suspend Flag</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMSC        Handle to the MSC Class Obj</pre><p><b> Return Value </b> - Status of the suspend flag </p><ul>
<li>'1' - If the device is suspended </li>
<li>'0' - If the device is not suspended</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Returns suspend flag status</p>
<p><b>Modifies</b> <br />
 None</p>
<p><b>Example</b> </p><pre class="fragment">        Uint16                  suspendFlagStat;
        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        suspendFlagStat = MSC_GetsuspendFlagStatus(pAppClassHandle-&gt;pMscObj);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="gabd34a0a4aeb1dc85c741520f91dfa11a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_handleDataDirMisMatch </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>dataDir</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_handleDataDirMisMatch</b> </p>
<p><b>Description</b> <br />
 Function to handle the data direction miss during USB data transfers. This function stalls the end points and updates the CSW status with phase error.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle     - Handle to Msc class object
        dataDir        - Actual Data direction expected;
                         should be 0x80 for IN and 0x0 for OUT</pre><p><b> Return Value </b> <br />
 Status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 Error detected during the data transfer</p>
<p><b> Post Condition </b> <br />
 Stalls the IN/OUT end points</p>
<p><b>Modifies</b> <br />
 CSW buffer</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         CSL_UsbEpHandle         hUbInEp;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         pMscAppClassHandle      pAppClassHandle;

         pAppClassHandle = &amp;mscAppHandle;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(pAppClassHandle);
         ....
         ....
         MSC_handleDataDirMisMatch(pMscHandle, CSL_MSC_CBW_DATADIR_IN);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga579e1756a15d48ce60e7720c0f38d480"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_HandlePreventAllowMediaRemoval </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbInEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>logicalUnit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_HandlePreventAllowMediaRemoval</b> </p>
<p><b>Description</b> <br />
 This handles the Prevent Allow Media Removal SCSI Command</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc class object
        hUsbInEp        - In end point handle
        logicalUnit     - Logical unit number</pre><p><b> Return Value </b> <br />
 status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Changes the state to sending CSW</p>
<p><b>Modifies</b> <br />
 storage state variable</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(&amp;mscAppHandle);
         ....
         ....
         MSC_HandlePreventAllowMediaRemoval(pMscHandle, hUbInEp, lunNum);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga54485498e9c0f9bfbabea7c8ac1f3d04"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_HandleReadCapacity </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbInEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>logicalUnit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_HandleReadCapacity</b> </p>
<p><b>Description</b> <br />
 This handles the Read Capacity SCSI Command</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc class object
        hUsbInEp        - In end point handle
        logicalUnit     - Logical unit number</pre><p><b> Return Value </b> <br />
 status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Changes the state to sending data</p>
<p><b>Modifies</b> <br />
 storage state variable</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(&amp;mscAppHandle);
         ....
         ....
         MSC_HandleReadCapacity(pMscHandle, hUbInEp, lunNum);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga20cc4ac09dcf1b6d39f920d40f401cfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_HandleStateWaitForCBW </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbDev</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbOutEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbInEp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_HandleStateWaitForCBW</b> </p>
<p><b>Description</b> <br />
 Handles the Wait for CBW state</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc class object
        hUsbOutEp       - Out end point handle
        hUsbInEp        - In end point handle</pre><p><b> Return Value </b> <br />
 status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Changes the state to sending data or stall</p>
<p><b>Modifies</b> <br />
 storage state variable</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         CSL_UsbEpHandle         hUbInEp;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         pMscAppClassHandle      pAppClassHandle;

         pAppClassHandle = &amp;mscAppHandle;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(pAppClassHandle);
         ....
         ....
         MSC_HandleStateWaitForCBW(pMscHandle, hUbOutEp, hUbInEp);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga35c39ffa579aa89700905691c90f323f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_HandleTestUnitReady </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbInEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>logicalUnit</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_HandleTestUnitReady</b> </p>
<p><b>Description</b> <br />
 This handles the Test Unit Ready SCSI Command</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc class object
        hUsbInEp        - In end point handle
        logicalUnit     - Logical unit number</pre><p><b> Return Value </b> <br />
 status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Changes the state to sending CSW</p>
<p><b>Modifies</b> <br />
 storage state variable</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(&amp;mscAppHandle);
         ....
         ....
         MSC_HandleTestUnitReady(pMscHandle, hUbInEp, lunNum);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga26d841d9acac8c72cc7f9de68b28753f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_Open </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a>&#160;</td>
          <td class="paramname"><em>pAppClassHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___usb_config.html">CSL_UsbConfig</a> *&#160;</td>
          <td class="paramname"><em>usbConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_Open</b> </p>
<p><b>Description</b> <br />
 This function Opens the Msc module. It initializes Msc and Ctrl handles with the data given by the application.</p>
<p>NOTE: THIS FUNCTION CONFIGURES USB MSC MODULE IN HIGH SPEED MODE</p>
<p><b>Arguments</b> </p><pre class="fragment">        pAppClassHandle      Application handle to the MSC Class Obj</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc handle </li>
<li>CSL_ESYS_BADMEDIA - Media is Bad - Format needed </li>
<li>CSL_ESYS_MEDIA_NOTPRESENT - Media is not present</li>
</ul>
<p><b> Pre Condition </b> <br />
 None</p>
<p><b> Post Condition </b> <br />
 Initializes Msc and Ctrl handles</p>
<p><b>Modifies</b> <br />
 Msc and Ctrl handle data</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga45d9d1d2cc2b5de652e1cda7e2cd5811"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_OpenFullspeed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a>&#160;</td>
          <td class="paramname"><em>pAppClassHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___usb_config.html">CSL_UsbConfig</a> *&#160;</td>
          <td class="paramname"><em>usbConfig</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_OpenFullspeed</b> </p>
<p><b>Description</b> <br />
 This function Opens the Msc module for fullspeed mode operation. It initializes Msc and Ctrl handles with the data given by the application</p>
<p>NOTE: THIS FUNCTION CONFIGURES USB MSC MODULE IN FULLSPEED MODE</p>
<p><b>Arguments</b> </p><pre class="fragment">        pAppClassHandle      Application handle to the MSC Class Obj</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc handle </li>
<li>CSL_ESYS_BADMEDIA - Media is Bad - Format needed </li>
<li>CSL_ESYS_MEDIA_NOTPRESENT - Media is not present</li>
</ul>
<p><b> Pre Condition </b> <br />
 None</p>
<p><b> Post Condition </b> <br />
 Initializes Msc and Ctrl handles</p>
<p><b>Modifies</b> <br />
 Msc and Ctrl handle data</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_OpenFullspeed(pAppClassHandle);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga742c31a8247cad9f1f0746cda3c36e90"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___c_s_l___m_s_c___e_n_u_m.html#ga9324e3a9461945d734f76af9753281c1">CSL_MscRequestRet</a> MSC_reqBotMscReset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a>&#160;</td>
          <td class="paramname"><em>devHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___usb_setup_struct.html">CSL_UsbSetupStruct</a> *&#160;</td>
          <td class="paramname"><em>usbSetup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hInEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hOutEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMsc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_reqBotMscReset</b> </p>
<p><b>Description</b> <br />
 This function handles the Bulk Only Mass storage Reset request from host</p>
<p><b>Arguments</b> </p><pre class="fragment">     devNum   - USB device instance number
     usbSetup - USB setup packet structure
     hInEp    - USB IN end point handle
     hOutEp   - USB OUT end point handle
     pMsc     - Pointer to the MSC Class Obj structure</pre><p><b> Return Value </b> </p><ul>
<li>CSL_MSC_REQUEST_GET_ACK - Get acknowledgement for request </li>
<li>CSL_MSC_REQUEST_STALL - Request stall signal (Error)</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC_lookupReqHandler should be called successfully</p>
<p><b> Post Condition </b> <br />
 Resets storage state</p>
<p><b>Modifies</b> <br />
 None</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_MscCtrlObject       *pCtrlHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         Uint16                  request;

         Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(&amp;mscAppHandle);
         ....
         ....
         pCtrlHandle-&gt;fpRequestHandler = MSC_lookupReqHandler(request,
                                                   pCtrlHandle-&gt;mscReqTable);

         pCtrlHandle-&gt;fpRequestHandler(pCtrlHandle-&gt;devNum,
                                       &amp;pCtrlHandle-&gt;usbSetup,hCtrlEpIn,hCtrlEpOut,pMSC);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga28498362ef8ed4a824cf1eb3557f5018"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group___c_s_l___m_s_c___e_n_u_m.html#ga9324e3a9461945d734f76af9753281c1">CSL_MscRequestRet</a> MSC_reqGetDescriptor </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#ga28ba0672f5f735185e8101e00b96123c">CSL_UsbDevHandle</a>&#160;</td>
          <td class="paramname"><em>devHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___usb_setup_struct.html">CSL_UsbSetupStruct</a> *&#160;</td>
          <td class="paramname"><em>usbSetup</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hInEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hOutEp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pMsc</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_reqGetDescriptor</b> </p>
<p><b>Description</b> <br />
 This function handles the request from host to get the descriptor</p>
<p><b>Arguments</b> </p><pre class="fragment">        CSL_MSC_REQUEST_ARGS    - MSC request arguments</pre><p><b> Return Value </b> </p><ul>
<li>CSL_MSC_REQUEST_GET_ACK - Get acknowledgement for request\ </li>
<li>CSL_MSC_REQUEST_STALL - Request stall signal (Error)</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC_lookupReqHandler should be called successfully</p>
<p><b> Post Condition </b> <br />
 Sends the descriptor</p>
<p><b>Modifies</b> <br />
 None</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_MscCtrlObject       *pCtrlHandle;
         CSL_UsbEpHandle         hUbOutEp;
         Uint16                  lunNum;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         Uint16                  request;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(&amp;mscAppHandle);
         ....
         ....
         pCtrlHandle-&gt;fpRequestHandler = MSC_lookupReqHandler(request,
                                                   pCtrlHandle-&gt;mscReqTable);

         pCtrlHandle-&gt;fpRequestHandler(pCtrlHandle-&gt;devNum,
                                       &amp;pCtrlHandle-&gt;usbSetup,hCtrlEpIn,hCtrlEpOut,pMSC);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="gab9f81a38696a3764b5fa17cc7885cef0"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_sendCswWithPhaseError </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_object.html">CSL_MscObject</a> *&#160;</td>
          <td class="paramname"><em>pMscHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group___c_s_l___u_s_b___d_a_t_a_s_t_r_u_c_t.html#gae700337480353992e5ae15c876c12d8b">CSL_UsbEpHandle</a>&#160;</td>
          <td class="paramname"><em>hUsbInEp</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_sendCswWithPhaseError</b> </p>
<p><b>Description</b> <br />
 This function sends CSW with phase error. This function is used to handle different error conditions by the SCSI commands.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pMscHandle      - Handle to Msc class object
        hUsbInEp        - In end point handle</pre><p><b> Return Value </b> <br />
 status returned by the MUSB module</p>
<p><b> Pre Condition </b> <br />
 Error detected during the data transfer</p>
<p><b> Post Condition </b> <br />
 Sends CSW with phase error</p>
<p><b>Modifies</b> <br />
 CSW buffer</p>
<p><b>Example</b> </p><pre class="fragment">         CSL_MscInitStructApp    mscAppHandle;
         CSL_MscObject           *pMscHandle;
         CSL_UsbEpHandle         hUbOutEp;
         CSL_UsbEpHandle         hUbInEp;
         Uint16                  mscAppBuffer[420];
         CSL_Status              status;
         pMscAppClassHandle      pAppClassHandle;

         pAppClassHandle = &amp;mscAppHandle;

         // Assign values to all the members in mscAppHandle struct
         mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
         .....
         .....
         status = MSC_Open(pAppClassHandle);
         ....
         ....
         MSC_sendCswWithPhaseError(pMscHandle, hUbInEp);</pre><hr/>
 
</div>
</div>
<a class="anchor" id="ga6486f02d96e2dfec1808e191ba3b1b2d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSL_Status MSC_SetLunAttr </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="group___c_s_l___m_s_c___d_a_t_a_s_t_r_u_c_t.html#gaf123338da7ff6a08d7d0d4eb5419616e">pMscAppClassHandle</a>&#160;</td>
          <td class="paramname"><em>pAppClassHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="struct_c_s_l___msc_lun_attrib_app.html">CSL_MscLunAttribApp</a> *&#160;</td>
          <td class="paramname"><em>lunHandle</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">Uint16&#160;</td>
          <td class="paramname"><em>lunNum</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>============================================================================ <br />
<b>MSC_SetLunAttr</b> </p>
<p><b>Description</b> <br />
 This function initializes the logical unit data structures.</p>
<p><b>Arguments</b> </p><pre class="fragment">        pAppClassHandle      Handle of the MSC User Application Object
        lunHandle            Handle to the application Lun Object
        lunNum               Logical Unit Number</pre><p><b> Return Value </b> CSL_Status </p><ul>
<li>CSL_SOK - Returned for success </li>
<li>CSL_ESYS_BADHANDLE - Invalid Msc class handle</li>
</ul>
<p><b> Pre Condition </b> <br />
 MSC module should be opened using MSC_Open/MSC_OpenFullspeed function</p>
<p><b> Post Condition </b> <br />
 Initializes the logical unit</p>
<p><b>Modifies</b> <br />
 Logical unit data structures</p>
<p><b>Example</b> </p><pre class="fragment">        CSL_MscInitStructApp    mscAppHandle;
        pMscAppClassHandle      pAppClassHandle;
        Uint16                  mscAppBuffer[420];
        CSL_Status              status;
        CSL_MscLunAttribApp     lunObj;

        pAppClassHandle = &amp;mscAppHandle;

        // Assign values to all the members in mscAppHandle struct
        mscAppHandle.pMscObj = &amp;mscAppBuffer[0];
        .....
        .....
        status = MSC_Open(pAppClassHandle);
        ....
        ....
        //Assign values to Lun Object structure
        lunObj.removeableApp = 0;
        lunObj.lbaSizeApp    = 512;
        ....
        ....
        status = MSC_SetLunAttr(&amp;mscAppHandle, &amp;lunObj, 0);</pre><hr/>
 
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
