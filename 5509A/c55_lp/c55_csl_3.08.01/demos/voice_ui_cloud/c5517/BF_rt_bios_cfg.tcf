utils.loadPlatform("ti.platforms.evm5517");

/* The following DSP/BIOS Features are enabled.  */
bios.enableRealTimeAnalysis(prog);
bios.enableRtdx(prog);
bios.enableTskManager(prog);

bios.GBL.MEMORYMODEL = "LARGE";
bios.MEM.NOMEMORYHEAPS = 0;
bios.MEM.ARGSSEG = prog.get("SARAM");
bios.MEM.STACKSEG = prog.get("SARAM");
bios.MEM.BSSSEG = prog.get("SARAM");
bios.MEM.CONSTSEG = prog.get("SARAM");
bios.MEM.DATASEG = prog.get("SARAM");
bios.MEM.CIOSEG = prog.get("SARAM");
bios.MEM.instance("SARAM").createHeap = 1;
bios.MEM.BIOSOBJSEG = prog.get("SARAM");
bios.MEM.MALLOCSEG = prog.get("SARAM");
bios.MEM.SYSDATASEG = prog.get("SARAM");
bios.MEM.OBJSEG = prog.get("SARAM");

bios.PRD.USECLK = 0;
bios.CLK.ENABLECLK = 0;
bios.GBL.MODIFYCLKMD = 0;

bios.TSK.create("audioTsk");
bios.TSK.instance("audioTsk").order = 1;
bios.TSK.instance("audioTsk").priority = 7;
bios.TSK.instance("audioTsk").fxn = prog.extern("audioLoopTask");
bios.TSK.instance("audioTsk").priority = 1;
bios.TSK.instance("audioTsk").stackSize = 1024;
bios.TSK.instance("audioTsk").stackMemSeg = prog.get("SARAM");
bios.TSK.instance("audioTsk").stackMemSeg = prog.get("SARAM");
bios.TSK.STACKSEG = prog.get("SARAM");
bios.TSK.STACKSIZE = 1024;
bios.TSK.SYSSTACKSIZE = 256;
bios.MEM.instance("VECT").base = 0x027e00;
bios.MEM.instance("SARAM").len = 0x1fe00;
bios.MEM.instance("SARAM").comment = "32 blocks of 8K bytes of on-chip Single-Access RAM";
bios.SEM.create("SEM_i2s_dmaTransferDone");
bios.MEM.ARGSSEG = prog.get("DARAM");
bios.MEM.GBLINITSEG = prog.get("DARAM");
bios.MEM.TRCDATASEG = prog.get("DARAM");
bios.MEM.SYSDATASEG = prog.get("DARAM");
bios.MEM.BIOSSEG = prog.get("DARAM");
bios.MEM.SYSINITSEG = prog.get("DARAM");
bios.MEM.HWISEG = prog.get("DARAM");
bios.MEM.RTDXTEXTSEG = prog.get("DARAM");
bios.MEM.instance("DARAM").createHeap = 1;
bios.MEM.STACKSEG = prog.get("SARAM");
bios.MEM.CINITSEG = prog.get("DARAM");
bios.MEM.CONSTSEG = prog.get("SARAM");
bios.MEM.SWITCHSEG = prog.get("DARAM");
bios.TSK.OBJMEMSEG = prog.get("DARAM");
bios.MEM.CIOSEG = prog.get("DARAM");
bios.MEM.PINITSEG = prog.get("DARAM");
bios.MEM.BIOSOBJSEG = prog.get("DARAM");
bios.MEM.MALLOCSEG = prog.get("DARAM");
bios.MEM.instance("SARAM").heapSize = 0x1000;
bios.MEM.instance("DARAM").heapSize = 0x1000;
bios.MEM.REUSECODESPACE = 0;
bios.MEM.STACKSIZE = 0x0400;
bios.MEM.SYSSTACKSIZE = 0x0200;
bios.MEM.TEXTSEG = prog.get("SARAM");
bios.SEM.create("SEM_UARTdataTransfer");
bios.TSK.instance("TSK_idle").order = 1;
bios.TSK.instance("audioTsk").order = 2;
bios.TSK.create("uartdmaTsk");
bios.TSK.instance("uartdmaTsk").order = 4;
bios.TSK.instance("uartdmaTsk").fxn = prog.extern("audioLoopTsk");
bios.TSK.instance("uartdmaTsk").fxn = prog.extern("audioLoopUartsend");
bios.TSK.instance("audioTsk").order = 1;
bios.TSK.instance("TSK_idle").order = 2;
bios.TSK.instance("uartdmaTsk").order = 3;
bios.TSK.instance("audioTsk").priority = 2;
bios.SEM.create("SEM_BlinkXF");
bios.SEM.create("SEM_DoneAudioCollection");
bios.TSK.create("TSK_blinkXFvoicerecog");
bios.TSK.instance("TSK_blinkXFvoicerecog").order = 4;
bios.TSK.instance("TSK_blinkXFvoicerecog").fxn = prog.extern("blinkXF");
bios.TSK.instance("TSK_blinkXFvoicerecog").comment = "task to blink XF if positive keyword trigger";
bios.TSK.create("TSK_Recognizer");
bios.TSK.instance("TSK_Recognizer").order = 5;
bios.TSK.instance("TSK_Recognizer").comment = "keyword recognizer";
bios.TSK.instance("TSK_Recognizer").fxn = prog.extern("RecognizerFxnLocalTsk");
bios.TSK.instance("audioTsk").priority = 4;
bios.TSK.instance("uartdmaTsk").priority = 3;
bios.TSK.instance("TSK_Recognizer").priority = 2;
bios.MEM.instance("DARAM").enableHeapLabel = 1;
bios.MEM.instance("DARAM").heapLabel = prog.extern("SEG0");
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 3;
bios.TSK.instance("uartdmaTsk").priority = 1;
bios.TSK.instance("TSK_Recognizer").priority = 3;
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 2;
bios.TSK.instance("audioTsk").priority = 6;
bios.TSK.instance("TSK_Recognizer").priority = 5;
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 4;
bios.TSK.instance("uartdmaTsk").priority = 3;
bios.TSK.instance("audioTsk").priority = 7;
bios.TSK.instance("uartdmaTsk").priority = 6;
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 3;
bios.TSK.instance("uartdmaTsk").priority = 4;
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 4;
bios.TSK.instance("uartdmaTsk").priority = 3;
bios.TSK.instance("uartdmaTsk").priority = 6;
bios.SEM.create("SEM_uartrx_transferDone");
bios.TSK.create("uartrxTsk");
bios.TSK.instance("uartrxTsk").order = 6;
bios.TSK.instance("uartrxTsk").fxn = prog.extern("uartRxTask");
bios.TSK.instance("TSK_idle").order = 1;
bios.TSK.instance("audioTsk").order = 2;
bios.TSK.instance("TSK_Recognizer").order = 4;
bios.TSK.instance("uartrxTsk").order = 5;
bios.TSK.instance("TSK_blinkXFvoicerecog").order = 6;
bios.TSK.instance("TSK_blinkXFvoicerecog").priority = 1;
bios.TSK.instance("uartrxTsk").order = 1;
bios.TSK.instance("TSK_idle").order = 2;
bios.TSK.instance("audioTsk").order = 3;
bios.TSK.instance("uartdmaTsk").order = 4;
bios.TSK.instance("TSK_Recognizer").order = 5;
bios.TSK.instance("uartrxTsk").priority = 4;
// !GRAPHICAL_CONFIG_TOOL_SCRIPT_INSERT_POINT!

prog.gen();

